{"version":3,"file":"useUpdateNewsletters.js","names":["useEffect","useState","applyMarkdown","fetchBackFromLocalLatest","replaceBlankNextUrl","checkContinuity","useUpdateNewsletters","dateLatestPub","hasLatestInArchive","hasInternet","text","ctrDispatch","replaceCycleInitd","setReplaceCycleInitd","length","hasContinuity"],"sources":["../../../src/ui/customHooks/useUpdateNewsletters.js"],"sourcesContent":["import {useEffect, useState} from 'react'\nimport {applyMarkdown} from '../../transform/applyMarkdown.js'\nimport {fetchBackFromLocalLatest} from '../../fetch/fetchBackFromLocalLatest.js'\nimport {replaceBlankNextUrl, checkContinuity} from '../../db/db.js'\n\nexport function useUpdateNewsletters(dateLatestPub, hasLatestInArchive, hasInternet, text, ctrDispatch) {\n\n  const [replaceCycleInitd, setReplaceCycleInitd] = useState(false)\n  useEffect(() => {\n\n    (async () => {\n      if (hasLatestInArchive === true && hasInternet && text?.length && !replaceCycleInitd) {\n        let hasContinuity = await checkContinuity()\n        if (hasContinuity && typeof dateLatestPub === 'string') {\n          await replaceBlankNextUrl(dateLatestPub, setReplaceCycleInitd)\n        } else if (!hasContinuity) {\n          setReplaceCycleInitd(true)\n        }\n      }\n    })();\n\n  }, [replaceCycleInitd, dateLatestPub, hasLatestInArchive, hasInternet, text])\n\n  useEffect(() => {\n    if (hasLatestInArchive === true && hasInternet && text?.length, replaceCycleInitd) {\n      (async () => {\n          await fetchBackFromLocalLatest(dateLatestPub)\n      })();\n    }\n  }, [replaceCycleInitd])\n\n}\n"],"mappings":";;;AAAA,SAAQA,SAAS,EAAEC,QAAQ,QAAO,OAAO;AACzC,SAAQC,aAAa,QAAO,kCAAkC;AAC9D,SAAQC,wBAAwB,QAAO,yCAAyC;AAChF,SAAQC,mBAAmB,EAAEC,eAAe,QAAO,gBAAgB;AAEnE,OAAO,SAASC,oBAAoB,CAACC,aAAa,EAAEC,kBAAkB,EAAEC,WAAW,EAAEC,IAAI,EAAEC,WAAW,EAAE;EAEtG,gBAAkDV,QAAQ,CAAC,KAAK,CAAC;IAAA;IAA1DW,iBAAiB;IAAEC,oBAAoB;EAC9Cb,SAAS,CAAC,YAAM;IAEd,yDAAC;MAAA;MAAA;QAAA;UAAA;YAAA,MACKQ,kBAAkB,KAAK,IAAI,IAAIC,WAAW,IAAIC,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEI,MAAM,IAAI,CAACF,iBAAiB;cAAA;cAAA;YAAA;YAAA;YAAA,OACxDP,eAAe,EAAE;UAAA;YAAvCU,aAAa;YAAA,MACbA,aAAa,IAAI,OAAOR,aAAa,KAAK,QAAQ;cAAA;cAAA;YAAA;YAAA;YAAA,OAC9CH,mBAAmB,CAACG,aAAa,EAAEM,oBAAoB,CAAC;UAAA;YAAA;YAAA;UAAA;YACzD,IAAI,CAACE,aAAa,EAAE;cACzBF,oBAAoB,CAAC,IAAI,CAAC;YAC5B;UAAC;UAAA;YAAA;QAAA;MAAA;IAAA,CAEJ,IAAG;EAEN,CAAC,EAAE,CAACD,iBAAiB,EAAEL,aAAa,EAAEC,kBAAkB,EAAEC,WAAW,EAAEC,IAAI,CAAC,CAAC;EAE7EV,SAAS,CAAC,YAAM;IACd,IAAIQ,kBAAkB,KAAK,IAAI,IAAIC,WAAW,IAAIC,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEI,MAAM,EAAEF,iBAAiB,EAAE;MACjF,yDAAC;QAAA;UAAA;YAAA;cAAA;cAAA,OACST,wBAAwB,CAACI,aAAa,CAAC;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA,CAChD,IAAG;IACN;EACF,CAAC,EAAE,CAACK,iBAAiB,CAAC,CAAC;AAEzB"}