{"version":3,"file":"useTransformText.js","names":["useEffect","useState","useMemo","blessed","useTransformText","renderText","message","ctrDispatch","text","setText","linkArray","setLinkObjArr","joinedText","join","linkCount","logger","debug","slice","length","replacer","match","linkUrl","current","replacement","regEx2","linkFormatedText","replace","undefined","type"],"sources":["../../../../src/ui/customHooks/ui/useTransformText.js"],"sourcesContent":["import {useEffect, useState, useMemo} from 'react'\nimport blessed from \"blessed\"\n\nexport function useTransformText(renderText, message, ctrDispatch) {\n\n  const [text, setText] = useState(\"\")\n  const [linkArray, setLinkObjArr]= useState([])\n\n  let joinedText = useMemo(() => renderText && renderText.join('\\n'), [renderText]) \n\n  let linkCount = -1\n\n  useEffect(() => {\n    logger.debug(linkArray.slice(0, 5))\n  }, [linkArray])\n\n  useEffect(() => {\n    if (joinedText?.length) {\n        setLinkObjArr([])\n      const replacer = (match, linkUrl) => {\n        setLinkObjArr(current => [...current, linkUrl])\n        linkCount++\n        const replacement = `[${linkCount}]`\n        return replacement \n      }\n\n      const regEx2 = /\\$\\$([^$]*)\\$\\$/g\n      const linkFormatedText = joinedText.replace(regEx2, replacer)\n      setText(linkFormatedText)\n    } \n  }, [joinedText])\n\n  useEffect(() => {\n    if (renderText === undefined && message.length) {\n      setText(message)\n    }\n  },[renderText, message])\n\n  useEffect(() => {\n    if (text.length) ctrDispatch({type: \"clearMessage\"})\n  }, [text])\n\n  return [text, linkArray]\n}\n"],"mappings":";;AAAA,SAAQA,SAAS,EAAEC,QAAQ,EAAEC,OAAO,QAAO,OAAO;AAClD,OAAOC,OAAO,MAAM,SAAS;AAE7B,OAAO,SAASC,gBAAgB,CAACC,UAAU,EAAEC,OAAO,EAAEC,WAAW,EAAE;EAEjE,gBAAwBN,QAAQ,CAAC,EAAE,CAAC;IAAA;IAA7BO,IAAI;IAAEC,OAAO;EACpB,iBAAkCR,QAAQ,CAAC,EAAE,CAAC;IAAA;IAAvCS,SAAS;IAAEC,aAAa;EAE/B,IAAIC,UAAU,GAAGV,OAAO,CAAC;IAAA,OAAMG,UAAU,IAAIA,UAAU,CAACQ,IAAI,CAAC,IAAI,CAAC;EAAA,GAAE,CAACR,UAAU,CAAC,CAAC;EAEjF,IAAIS,SAAS,GAAG,CAAC,CAAC;EAElBd,SAAS,CAAC,YAAM;IACde,MAAM,CAACC,KAAK,CAACN,SAAS,CAACO,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACrC,CAAC,EAAE,CAACP,SAAS,CAAC,CAAC;EAEfV,SAAS,CAAC,YAAM;IACd,IAAIY,UAAU,aAAVA,UAAU,eAAVA,UAAU,CAAEM,MAAM,EAAE;MACpBP,aAAa,CAAC,EAAE,CAAC;MACnB,IAAMQ,QAAQ,GAAG,SAAXA,QAAQ,CAAIC,KAAK,EAAEC,OAAO,EAAK;QACnCV,aAAa,CAAC,UAAAW,OAAO;UAAA,oCAAQA,OAAO,IAAED,OAAO;QAAA,CAAC,CAAC;QAC/CP,SAAS,EAAE;QACX,IAAMS,WAAW,cAAOT,SAAS,MAAG;QACpC,OAAOS,WAAW;MACpB,CAAC;MAED,IAAMC,MAAM,GAAG,kBAAkB;MACjC,IAAMC,gBAAgB,GAAGb,UAAU,CAACc,OAAO,CAACF,MAAM,EAAEL,QAAQ,CAAC;MAC7DV,OAAO,CAACgB,gBAAgB,CAAC;IAC3B;EACF,CAAC,EAAE,CAACb,UAAU,CAAC,CAAC;EAEhBZ,SAAS,CAAC,YAAM;IACd,IAAIK,UAAU,KAAKsB,SAAS,IAAIrB,OAAO,CAACY,MAAM,EAAE;MAC9CT,OAAO,CAACH,OAAO,CAAC;IAClB;EACF,CAAC,EAAC,CAACD,UAAU,EAAEC,OAAO,CAAC,CAAC;EAExBN,SAAS,CAAC,YAAM;IACd,IAAIQ,IAAI,CAACU,MAAM,EAAEX,WAAW,CAAC;MAACqB,IAAI,EAAE;IAAc,CAAC,CAAC;EACtD,CAAC,EAAE,CAACpB,IAAI,CAAC,CAAC;EAEV,OAAO,CAACA,IAAI,EAAEE,SAAS,CAAC;AAC1B"}