{"version":3,"file":"useScroll.js","names":["useEffect","stripAnsi","useScroll","refs","state","dispatch","lineFromSearch","setLineFromSearch","loadState","mainBoxRef","scrollToZeroFlag","scrollToScrollHeightFlagRef","cursorLeft","cursorTop","length","lines","current","getScreenLines","map","line","replace","_lineFromSearch","i","findIndex","el","scrollTo","type","payload","getScrollHeight"],"sources":["../../../../src/ui/customHooks/ui/useScroll.js"],"sourcesContent":["import {useEffect} from 'react'\nimport stripAnsi from 'strip-ansi'\n\nexport function useScroll(refs, state, dispatch, lineFromSearch, setLineFromSearch, loadState) {\n  const {mainBoxRef, scrollToZeroFlag, scrollToScrollHeightFlagRef} = refs\n\n  const {cursorLeft, cursorTop} = state \n\n  \n  useEffect(() => {\n    if (lineFromSearch?.length && loadState === 'loadedFromSearch') {\n      let lines = mainBoxRef.current?.getScreenLines()\n      lines = lines.map(line => stripAnsi(line)).map(line => line.replace(/\\[\\d+\\]/g, ''))\n      let _lineFromSearch = lineFromSearch.replace(/\\{[^}]+\\}|\\$\\$.*?\\$\\$/g, '')\n      const i = lines.findIndex(el => el === _lineFromSearch)\n      mainBoxRef.current?.scrollTo(i);\n      dispatch({type: \"setCursorTop\", payload: i})\n      setLineFromSearch(null);\n    }\n  }, [lineFromSearch, loadState])\n\n  useEffect(() => {\n    mainBoxRef.current?.scrollTo(cursorTop);\n\n    if (scrollToScrollHeightFlagRef.current) {\n     \n      mainBoxRef?.current?.scrollTo(mainBoxRef.current?.getScrollHeight())\n    } else if (scrollToZeroFlag?.current) {\n\n      mainBoxRef?.current?.scrollTo(0)\n    }\n\n  }, [cursorLeft, cursorTop])\n}\n"],"mappings":"AAAA,SAAQA,SAAS,QAAO,OAAO;AAC/B,OAAOC,SAAS,MAAM,YAAY;AAElC,OAAO,SAASC,SAAS,CAACC,IAAI,EAAEC,KAAK,EAAEC,QAAQ,EAAEC,cAAc,EAAEC,iBAAiB,EAAEC,SAAS,EAAE;EAC7F,IAAOC,UAAU,GAAmDN,IAAI,CAAjEM,UAAU;IAAEC,gBAAgB,GAAiCP,IAAI,CAArDO,gBAAgB;IAAEC,2BAA2B,GAAIR,IAAI,CAAnCQ,2BAA2B;EAEhE,IAAOC,UAAU,GAAeR,KAAK,CAA9BQ,UAAU;IAAEC,SAAS,GAAIT,KAAK,CAAlBS,SAAS;EAG5Bb,SAAS,CAAC,YAAM;IACd,IAAIM,cAAc,aAAdA,cAAc,eAAdA,cAAc,CAAEQ,MAAM,IAAIN,SAAS,KAAK,kBAAkB,EAAE;MAAA;MAC9D,IAAIO,KAAK,0BAAGN,UAAU,CAACO,OAAO,wDAAlB,oBAAoBC,cAAc,EAAE;MAChDF,KAAK,GAAGA,KAAK,CAACG,GAAG,CAAC,UAAAC,IAAI;QAAA,OAAIlB,SAAS,CAACkB,IAAI,CAAC;MAAA,EAAC,CAACD,GAAG,CAAC,UAAAC,IAAI;QAAA,OAAIA,IAAI,CAACC,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC;MAAA,EAAC;MACpF,IAAIC,eAAe,GAAGf,cAAc,CAACc,OAAO,CAAC,wBAAwB,EAAE,EAAE,CAAC;MAC1E,IAAME,CAAC,GAAGP,KAAK,CAACQ,SAAS,CAAC,UAAAC,EAAE;QAAA,OAAIA,EAAE,KAAKH,eAAe;MAAA,EAAC;MACvD,wBAAAZ,UAAU,CAACO,OAAO,yDAAlB,qBAAoBS,QAAQ,CAACH,CAAC,CAAC;MAC/BjB,QAAQ,CAAC;QAACqB,IAAI,EAAE,cAAc;QAAEC,OAAO,EAAEL;MAAC,CAAC,CAAC;MAC5Cf,iBAAiB,CAAC,IAAI,CAAC;IACzB;EACF,CAAC,EAAE,CAACD,cAAc,EAAEE,SAAS,CAAC,CAAC;EAE/BR,SAAS,CAAC,YAAM;IAAA;IACd,wBAAAS,UAAU,CAACO,OAAO,yDAAlB,qBAAoBS,QAAQ,CAACZ,SAAS,CAAC;IAEvC,IAAIF,2BAA2B,CAACK,OAAO,EAAE;MAAA;MAEvCP,UAAU,aAAVA,UAAU,+CAAVA,UAAU,CAAEO,OAAO,yDAAnB,qBAAqBS,QAAQ,yBAAChB,UAAU,CAACO,OAAO,yDAAlB,qBAAoBY,eAAe,EAAE,CAAC;IACtE,CAAC,MAAM,IAAIlB,gBAAgB,aAAhBA,gBAAgB,eAAhBA,gBAAgB,CAAEM,OAAO,EAAE;MAAA;MAEpCP,UAAU,aAAVA,UAAU,+CAAVA,UAAU,CAAEO,OAAO,yDAAnB,qBAAqBS,QAAQ,CAAC,CAAC,CAAC;IAClC;EAEF,CAAC,EAAE,CAACb,UAAU,EAAEC,SAAS,CAAC,CAAC;AAC7B"}