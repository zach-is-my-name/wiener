{"version":3,"file":"MainBox.js","names":["React","Cursor","LinkBox","HelpPage","SearchPage","RefBox","PopUpBox","useEffect","useState","useUiHooks","useTransformText","MainBox","props","ctrDispatch","lineFromSearch","setLineFromSearch","loadState","handlers","dispatch","refs","state","renderText","message","text","linkArray","mainBoxHidden","setMainBoxHidden","linkUrl","setLinkUrl","linkBoxHidden","setLinkBoxHidden","refBoxHidden","setRefBoxHidden","popUpBoxHidden","setPopUpBoxHidden","popUpMessage","length","openLinkIndex","initialRefNum","linkBox","linkLine","linkBoxRef","refBox","mainBoxRef","searchPage","searchPageHidden","setDateFromSearch","popUpBox","helppage","helpPageHidden","keyHandler","clickHandler","cursorRef","cursorTop","cursorLeft","savedCursorPos"],"sources":["../../../src/ui/components/MainBox.js"],"sourcesContent":["import React from 'react';\nimport Cursor from \"./Cursor.js\"  \nimport LinkBox from \"./LinkBox.js\"\nimport HelpPage from './HelpPage.js'\nimport SearchPage from './SearchPage.js'\nimport RefBox from './RefBox.js' \nimport PopUpBox from './PopUpBox.js';\nimport {useEffect, useState} from 'react';\nimport {useUiHooks} from '../customHooks/ui/useUiHooks.js' \nimport {useTransformText} from '../customHooks/ui/useTransformText.js'\n\nconst MainBox = props =>  {\n\n  const [ handlers, dispatch, refs, state] = useUiHooks(props.ctrDispatch, props.lineFromSearch, props.setLineFromSearch, props.loadState)\n  \n  const [text, linkArray] = useTransformText(props.renderText, props.message, props.ctrDispatch)\n\n  const [mainBoxHidden, setMainBoxHidden] = useState(false)\n  const [linkUrl, setLinkUrl] = useState(\"\")\n  const [linkBoxHidden, setLinkBoxHidden] = useState(true)\n  const [refBoxHidden, setRefBoxHidden] = useState(true)\n  const [popUpBoxHidden, setPopUpBoxHidden] = useState(true)\n\n  useEffect(() => {\n    if (props.popUpMessage?.length) {\n      setPopUpBoxHidden(false)\n    } else {\n      setPopUpBoxHidden(true)\n    }\n  }, [props.popUpMessage])\n\n  useEffect(() => {\n    if (typeof state.openLinkIndex === 'number' && state.openLinkIndex >= 0 && linkArray.length) {\n      setLinkUrl(linkArray[state.openLinkIndex])\n      setLinkBoxHidden(false)\n    } else {\n      setLinkBoxHidden(true)\n    }\n  }, [state.openLinkIndex, linkArray])\n\n  useEffect(() => {\n    if (state.initialRefNum) {\n      setRefBoxHidden(false)\n    } else {\n      setRefBoxHidden(true)\n    }\n  }, [state.initialRefNum])\n\n  const linkBox = <LinkBox linkLine={state.linkLine} linkBoxRef={refs.linkBoxRef} hidden={linkBoxHidden} linkUrl={linkUrl} dispatch={dispatch} />  \n\n  const refBox = <RefBox mainBoxRef={refs.mainBoxRef} initialRefNum={state.initialRefNum} linkArray={linkArray.length && linkArray || []} hidden={refBoxHidden} dispatch={dispatch} />\n\n  const searchPage = <SearchPage searchPageHidden={props.searchPageHidden} setLineFromSearch={props.setLineFromSearch} setDateFromSearch={props.setDateFromSearch} ctrDispatch={props.ctrDispatch}/>\n\n  const popUpBox = <PopUpBox popUpMessage={props.popUpMessage} popUpBoxHidden={popUpBoxHidden} setPopUpBoxHidden={setPopUpBoxHidden} ctrDispatch={props.ctrDispatch}/> \n  const helppage = <HelpPage helpPageHidden={props.helpPageHidden} /> \n  \n  useEffect(() => {\n    if (props.helpPageHidden === false ||  props.searchPageHidden === false) {\n      setMainBoxHidden(true)\n    } else if (props.helpPageHidden === true ||  props.searchPageHidden === true) {\n      setMainBoxHidden(false)\n    }\n  }, [props.helpPageHidden, props.searchPageHidden])\n\n    return (\n      <>\n      <box \n      top={\"top\"}\n      left={\"left\"}\n      width={\"100%\"}\n      height={\"100%\"}  \n      focused={props.searchPageHidden && props.helpPageHidden && linkBoxHidden}\n      hidden={mainBoxHidden}\n      keyable={true}\n      input={true}\n      scrollable={true}\n      mouse={true} \n      tags={true}\n      onKeypress={handlers.keyHandler}\n      onClick={handlers.clickHandler}\n      ref={refs.mainBoxRef}\n      name={\"mainbox\"}\n      fullUnicode\n      forceUnicode\n      content={text}\n      > \n      <Cursor cursorRef={refs.cursorRef} cursorTop={state.cursorTop} cursorLeft={state.cursorLeft} savedCursorPos={props.savedCursorPos} />   \n      </box>\n      {props.searchPageHidden  === false ? searchPage : null}\n      {props.helpPageHidden === false ? helppage : null}\n      {linkBoxHidden === false ? linkBox : null}\n      {refBoxHidden === false ? refBox : null}\n      {popUpBoxHidden === false ? popUpBox : null}\n      </>\n    )\n}\n\n\nexport default MainBox\n\n\n\n"],"mappings":"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"}