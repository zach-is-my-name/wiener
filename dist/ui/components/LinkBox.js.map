{"version":3,"file":"LinkBox.js","names":["React","useEffect","useState","useRef","useLayoutEffect","open","LinkBox","hidden","linkUrl","linkBoxRef","linkLine","dispatch","formRef","button1Ref","button2Ref","cancelPress","type","openPress","handleKeyPressLinkBox","ch","key","setImmediate","full","process","exit","name","length","current","focus","submit"],"sources":["../../../src/ui/components/LinkBox.js"],"sourcesContent":["import React, {useEffect, useState, useRef, useLayoutEffect} from 'react';\nimport open from 'open'\n\nfunction LinkBox({hidden, linkUrl, linkBoxRef, linkLine, dispatch}) {\n  const formRef = useRef(null)\n  const button1Ref = useRef(null)\n  const button2Ref = useRef(null)\n\n  const cancelPress = () => {\n    dispatch({type: \"closeLinkBox\"})  \n  }\n  const openPress = (linkUrl) => {\n    open(linkUrl) \n    dispatch({type: \"closeLinkBox\"})  \n  }\n\n  const handleKeyPressLinkBox = (ch, key) => {\n    setImmediate(() => {\n       if (key.full === 'C-c') {\n        process.exit(0)\n      } else if (key.name === 'escape' || key.name === 'c' || key.name === 'C'){\n        cancelPress()\n      } \n    })\n  }\n\n  useEffect(() => {\n    if (!hidden && linkUrl.length) {\n      formRef.current?.focus()\n      formRef.current?.key('escape', function(ch, key) {\n        cancelPress()\n      })\n      formRef.current?.key('c', function(ch, key) {\n        cancelPress()\n      })\n      formRef.current?.key('o', function(ch, key) {\n        openPress(linkUrl)\n        dispatch({type: \"closeLinkBox\"})  \n      })\n\n      formRef.current?.key('O', function(ch, key) {\n        openPress(linkUrl)\n        dispatch({type: \"closeLinkBox\"})  \n      })\n    }\n  }, [])\n\n  return(\n   <> \n    <form \n      left={\"center\"} \n      top={linkLine + 3} \n      border={{type: 'line'}} \n      shrink={true}\n      label={\"esc to close\"}\n      onKeypress={handleKeyPressLinkBox}\n      hidden={hidden} \n      ref={formRef} \n      align={\"center\"} \n      onSubmit={() => openPress(linkUrl)} \n      onCancel={()=> cancelPress()}\n      height={7}\n    >\n    <text align={\"center\"} top={1} content={linkUrl} />\n    <box /*style={{border: {fg: 'cyan'}}} border={{type: 'line'}}*/ name={\"button-group\"} align={\"center\"} left={\"center\"} shrink={true} top={3}>\n\n    <button keys bottom={0} left={\"25%-3\"} /*border={{type: 'line'}}*/ shrink={true} content={\"g(o)\"} onPress={() => formRef.current?.submit()} ref={button1Ref} mouse/> \n\n    <button keys bottom={0} left={\"25%+3\"} /*border={{type:'line'}}*/ ref={button2Ref} shrink={true}  onPress={() => formRef.current?.submit()} content={\"(c)ancle\"} onPress={cancelPress} /> \n    </box>\n    </form>\n   </>\n\n\n  )\n}\n  export default LinkBox\n\n"],"mappings":"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"}